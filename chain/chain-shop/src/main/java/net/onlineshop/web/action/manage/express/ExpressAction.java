package net.onlineshop.web.action.manage.express;import net.onlineshop.core.BaseAction;import net.onlineshop.core.oscache.FrontCache;import net.onlineshop.services.manage.express.ExpressService;import net.onlineshop.services.manage.express.bean.Express;public class ExpressAction extends BaseAction<Express> {	private static final long serialVersionUID = 1L;	private ExpressService expressService;	private FrontCache frontCache;	public FrontCache getFrontCache() {		return frontCache;	}	public void setFrontCache(FrontCache frontCache) {		this.frontCache = frontCache;	}	public ExpressService getExpressService() {		return expressService;	}	protected void selectListAfter() {		pager.setPagerUrl("/manage/express!selectList.action");	}	public void setExpressService(ExpressService expressService) {		this.expressService = expressService;	}	public Express getE() {		return this.e;	}	public String toAdd() throws Exception {		System.out.println(this.getRequest().getParameter("areaCode"));		this.getRequest().setAttribute("areaCode", this.getRequest().getParameter("areaCode"));		e.clear();		return toAdd;	}	public String toEdit() throws Exception {		e = getServer().selectOne(getE());		String areaCode = e.getAreaCode();		this.getRequest().setAttribute("areaCode", areaCode.substring(areaCode.indexOf("(") + 1, areaCode.indexOf(")")));		return toEdit;	}	public void prepare() throws Exception {		if (this.e == null) {			this.e = new Express();		}	}	public void insertAfter(Express e) {		e.clear();		try {			reset();		} catch (Exception e1) {			// TODO Auto-generated catch block			e1.printStackTrace();		}	}	public String update() throws Exception {		String code = e.getCode();		if (code.equals("POST")) {			e.setName("平邮");		}		if (code.equals("EMS")) {			e.setName("EMS");		}		if (code.equals("EXPRESS")) {			e.setName("快递");		}		getServer().update(getE());		String areaCode = getE().getAreaCode();		areaCode = areaCode.substring(areaCode.indexOf("(") + 1, areaCode.indexOf(")"));		String url = "/manage/express!selectList.action?e.areaCode=" + areaCode;		insertAfter(getE());		this.getResponse().sendRedirect(url);		return null;	}	/**	 * 	 * 	 * @return	 * @throws Exception	 */	public String insert() throws Exception {		String code = e.getCode();		if (code.equals("POST")) {			e.setName("平邮");		}		if (code.equals("EMS")) {			e.setName("EMS");		}		if (code.equals("EXPRESS")) {			e.setName("快递");		}		getServer().insert(getE());		String areaCode = getE().getAreaCode();		areaCode = areaCode.substring(areaCode.indexOf("(") + 1, areaCode.indexOf(")"));		String url = "/manage/express!selectList.action?e.areaCode=" + areaCode;		insertAfter(getE());		this.getResponse().sendRedirect(url);		return null;	}	private void reset() throws Exception {		frontCache.loadCatalogs(true);// 同步更新缓存	}}