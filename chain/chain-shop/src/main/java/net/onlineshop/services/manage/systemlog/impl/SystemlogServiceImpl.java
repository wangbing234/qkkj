package net.onlineshop.services.manage.systemlog.impl;import net.onlineshop.core.ServersManager;import net.onlineshop.core.util.AddressUtils;import net.onlineshop.services.manage.systemlog.SystemlogService;import net.onlineshop.services.manage.systemlog.bean.Systemlog;import net.onlineshop.services.manage.systemlog.dao.SystemlogDao;public class SystemlogServiceImpl extends ServersManager<Systemlog> implements SystemlogService {	private SystemlogDao systemlogDao;	public void setSystemlogDao(SystemlogDao systemlogDao) {		this.systemlogDao = systemlogDao;	}	@Override	public Systemlog selectFirstOne(String account) {		return systemlogDao.selectFirstOne(account);	}		@Override	public void log(String title,String content,String account) {		Systemlog systemlog = new Systemlog();		systemlog.setTitle(title);		systemlog.setContent(content);		systemlog.setAccount(account);		systemlog.setType(3);		setAdressInfo(systemlog);		systemlogDao.insert(systemlog);	}	    private void setAdressInfo(Systemlog systemlog)    {    	systemlog.setLoginIP(AddressUtils.getIp(getRequest()));		String address = null;		if (!systemlog.getLoginIP().equals("127.0.0.1") && !systemlog.getLoginIP().equals("localhost")) {			// 获取指定IP的区域位置			try {				address = AddressUtils.getAddresses("ip=" + systemlog.getLoginIP(), "utf-8");			} catch (Exception e) {				e.printStackTrace();			}			systemlog.setLoginArea(address);		}    }}