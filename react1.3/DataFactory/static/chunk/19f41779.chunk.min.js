webpackJsonp([17],{126:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=a(1),r=l(i),u=a(13),s=a(15),d=a(59),c=l(d),o=void 0,m=r["default"].createClass({displayName:"RuleForm",handleChange:function(e,t){this.setState(n({},e,t.target.value))},handleSelectChange:function(e,t){this.setState(n({},e,t))},getInitialState:function(){return{ruleName:"",auditTable:[],auditType:[],auditLd:[],ruleType:[],auditColumn:[],alarmLevel:[],desc:""}},handleSubmit:function(e){this.setState({validateState:!0});var t=u.Form.handleData(this.state,o);t.isPass?(console.log("表单验证通过"),console.log(JSON.stringify(t.data))):console.log("表单验证失败"),e.preventDefault()},isSuccess:function(e){o.push(e)},handleCancel:function(){this.setState({visible:!1})},listChange:function(e){},render:function(){o=[];var e=[{validateVal:this.state.projectName,required:"请填写项目名称",handle:function(){var e=void 0;return e=!this.validateVal&&this.required?this.required:"success"}}];return r["default"].createElement(u.Form,{horizontal:!0,isSuccess:this.isSuccess,sibmitStatus:this.state.isSubmit},r["default"].createElement(u.FormItem,{label:"规则名称:",validate:e[0],required:!0},r["default"].createElement("input",{type:"text",className:"form-control",value:this.state.ruleName,onChange:this.handleChange.bind(this,"ruleName")})),r["default"].createElement(u.FormItem,{label:"稽核表:",validate:e[1],required:!0},r["default"].createElement(s.Select,{selected:this.state.auditTable,onChange:this.handleSelectChange.bind(this,"auditTable")},r["default"].createElement(s.Option,{value:"select"},"请选择"),r["default"].createElement(s.Option,{value:"test_a"},"test"),r["default"].createElement(s.Option,{value:"test_b"},"test1"))),r["default"].createElement(u.FormItem,{label:"稽核类型:",validate:e[1],required:!0},r["default"].createElement(s.Select,{selected:this.state.auditType,onChange:this.handleSelectChange.bind(this,"auditType")},r["default"].createElement(s.Option,{value:"select"},"请选择"),r["default"].createElement(s.Option,{value:"test_a"},"test"),r["default"].createElement(s.Option,{value:"test_b"},"test1"))),r["default"].createElement(u.FormItem,{label:"稽核粒度:",validate:e[2],required:!0},r["default"].createElement(s.Select,{selected:this.state.auditLd,onChange:this.handleSelectChange.bind(this,"auditLd")},r["default"].createElement(s.Option,{value:"select"},"请选择"),r["default"].createElement(s.Option,{value:"test_a"},"test"),r["default"].createElement(s.Option,{value:"test_b"},"test1"))),r["default"].createElement(u.FormItem,{label:"规则类型:",validate:e[1],required:!0},r["default"].createElement(s.Select,{selected:this.state.ruleType,onChange:this.handleSelectChange.bind(this,"ruleType")},r["default"].createElement(s.Option,{value:"select"},"请选择"),r["default"].createElement(s.Option,{value:"test_a"},"test"),r["default"].createElement(s.Option,{value:"test_b"},"test1"))),r["default"].createElement(u.FormItem,{label:"稽核字段:",validate:e[1],required:!0},r["default"].createElement(s.Select,{selected:this.state.auditColumn,onChange:this.handleSelectChange.bind(this,"auditColumn")},r["default"].createElement(s.Option,{value:"select"},"请选择"),r["default"].createElement(s.Option,{value:"test_a"},"test"),r["default"].createElement(s.Option,{value:"test_b"},"test1"))),r["default"].createElement(u.FormItem,{label:"报警级别:",validate:e[1],required:!0},r["default"].createElement(s.Select,{selected:this.state.alarmLevel,onChange:this.handleSelectChange.bind(this,"alarmLevel")},r["default"].createElement(s.Option,{value:"select"},"请选择"),r["default"].createElement(s.Option,{value:"test_a"},"test"),r["default"].createElement(s.Option,{value:"test_b"},"test1"))),r["default"].createElement(u.FormItem,{label:"规则描述:"},r["default"].createElement("textarea",{rows:"4",className:"form-control",value:this.state.desc,onChange:this.handleChange.bind(this,"desc")})),r["default"].createElement(c["default"],{submitClick:this.handleSubmit,cancelClick:this.handleCancel}))}});e.exports=m},240:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}var n,i=a(1),r=l(i),u=a(21),s=l(u),d=a(126),c=(l(d),a(624)),o=l(c),m=[{title:"序号",key:"number",render:function(e){return r["default"].createElement("a",null,e)}},{title:"规则名称",key:"ruleName",render:function(e){return r["default"].createElement("a",{onClick:n.editHandler},e)}},{title:"稽核类型",key:"auditType"},{title:"规则类型",key:"ruleType"},{title:"稽核表",key:"auditTable"},{title:"稽核表字段",key:"auditColumn"},{title:"参照表",key:"refTable"},{title:"参照表字段",key:"refColumn"},{title:"操作",key:"operation",render:function(e,t){return r["default"].createElement("span",null,r["default"].createElement("a",{"data-key":e.ruleName,href:"javascript:void(0);",onClick:n.editHandler},"编辑"),r["default"].createElement("span",{className:"ant-divider"}),r["default"].createElement("a",{"data-key":e.ruleName,href:"javascript:void(0);",onClick:n.delHandler},"删除"))}}],f={totalList:[{key:"1",number:1,ruleName:"验证用户ID是否为空",auditType:"横向稽核",ruleType:"空值检核",auditTable:"BI_1",auditColumn:"ID-USERS",refTable:"BI_2",refColumn:"ID-USERS2"},{key:"2",number:2,ruleName:"验证用户ID是否为空1",auditType:"横向稽核",ruleType:"空值检核",auditTable:"BI_1",auditColumn:"ID-USERS",refTable:"BI_2",refColumn:"ID-USERS2"}],currentPage:1,totalPageNum:20},h=r["default"].createClass({displayName:"RuleConfig",getInitialState:function(){return n=this,{visible:!1,title:"规则配置"}},editHandler:function(e){this.props.editClick()},delHandler:function(){this.refs.modal.open()},yesHandler:function(){alert("执行删除方法")},render:function(){return r["default"].createElement("div",null,r["default"].createElement(s["default"],{data:f,column:m,howRow:10}),r["default"].createElement(o["default"],{ref:"modal",msg:"是否确认删除?",yesHandler:this.yesHandler}))}});e.exports=h},624:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}var n=a(1),i=l(n),r=a(23),u=i["default"].createClass({displayName:"ConfirmModal",open:function(){this.refs.modal.open()},clickHandler:function(){this.props.yesHandler()},cancelHandler:function(){this.refs.modal.close()},render:function(){return i["default"].createElement(r.Modal,{ref:"modal"},i["default"].createElement(r.ModalBody,null,i["default"].createElement("div",{className:"text-center"},this.props.msg),i["default"].createElement("div",{className:"text-center"},i["default"].createElement("button",{type:"button",className:"btn btn default",onClick:this.clickHandler},"确认"),i["default"].createElement("button",{type:"button",className:"btn btn default",onClick:this.cancelHandler},"取消"))))}});e.exports=u},672:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}var n=a(1),i=l(n),r=a(678),u=l(r),s=a(676),d=l(s),c=(a(23),i["default"].createClass({displayName:"Index",getInitialState:function(){return{isShowForm:!1}},addHandler:function(){this.setState({isShowForm:!0})},editClickHandler:function(){this.setState({isShowForm:!0})},handleCancel:function(e){this.setState({isShowForm:!1})},renderTable:function(){return i["default"].createElement("div",null,i["default"].createElement("div",null,i["default"].createElement("div",{className:"common-margin"},i["default"].createElement("input",{type:"text",className:"common-input",placeholder:"输入任务名称"}),i["default"].createElement("button",{type:"button",className:"btn btn-default"},"查询")),i["default"].createElement("div",{className:"common-margin"},i["default"].createElement("button",{type:"button",className:"btn btn-default",onClick:this.addHandler},"新建"),i["default"].createElement("button",{type:"button",className:"btn btn-default"},"删除"))),i["default"].createElement(u["default"],{editClick:this.editClickHandler}))},renderForm:function(){return i["default"].createElement(d["default"],{data:this.state.taskData,cancel:this.handleCancel})},render:function(){var e=void 0;return e=this.state.isShowForm?this.renderForm():this.renderTable(),i["default"].createElement("div",null,e)}}));e.exports=c},673:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},r=a(1),u=l(r),s=a(13),d=a(15),c=void 0,o=u["default"].createClass({displayName:"CreateTask",handleChange:function(e,t){this.setState(n({},e,t.target.value))},handleSelectChange:function(e,t){this.setState(n({},e,t))},getInitialState:function(){return i({taskName:"",desc:"",database:[]},this.props)},handleSubmit:function(e){this.setState({validateState:!0});var t=s.Form.handleData(this.state,c);t.isPass?(console.log("表单验证通过"),console.log(JSON.stringify(t.data))):console.log("表单验证失败"),e.preventDefault()},isSuccess:function(e){c.push(e)},handleCancel:function(){this.setState({visible:!1})},componentDidMount:function(){},listChange:function(e){},render:function(){c=[];var e=[{validateVal:this.state.taskName,required:"请填写任务名称",handle:function(){var e=void 0;return e=!this.validateVal&&this.required?this.required:"success"}},{validateVal:this.state.database,required:"请选择数据库",handle:function(){var e=void 0;return e=!this.validateVal&&this.required?this.required:"success"}}];return u["default"].createElement(s.Form,{horizontal:!0,isSuccess:this.isSuccess,sibmitStatus:this.state.isSubmit},u["default"].createElement(s.FormItem,{label:"任务名称:",validate:e[0],required:!0},u["default"].createElement("input",{type:"text",className:"form-control",value:this.state.taskName,onChange:this.handleChange.bind(this,"taskName")})),u["default"].createElement(s.FormItem,{label:"任务描述:"},u["default"].createElement("textarea",{rows:"4",className:"form-control",value:this.state.desc,onChange:this.handleChange.bind(this,"desc")})),u["default"].createElement(s.FormItem,{label:"数据库:",validate:e[1],required:!0},u["default"].createElement(d.Select,{selected:this.state.database,onChange:this.handleSelectChange.bind(this,"database")},u["default"].createElement(d.Option,{value:"no"},"请选择"),u["default"].createElement(d.Option,{value:"hive_1"},"hive_1"),u["default"].createElement(d.Option,{value:"hive_2"},"hive_2"))))}});e.exports=o},674:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},r=a(1),u=l(r),s=a(15),d=a(98),c=a(13),o=void 0,m=u["default"].createClass({displayName:"MsgNotice",handleSelectChange:function(e,t){this.setState(n({},e,t))},getInitialState:function(){return i({noticeType:[],msg:[],email:[]},this.props)},componentDidMount:function(){},listChange:function(e){},onChange:function(e){console.log("checked = ",e)},handleSubmit:function(e){this.setState({validateState:!0});var t=c.Form.handleData(this.state,o);t.isPass?(console.log("表单验证通过"),console.log(JSON.stringify(t.data))):console.log("表单验证失败"),e.preventDefault()},isSuccess:function(e){o.push(e)},handleCancel:function(){this.setState({visible:!1})},render:function(){o=[];var e=[{validateVal:this.state.noticeType,required:"请选择消息提醒方式",handle:function(){var e=void 0;return e=!this.validateVal&&this.required?this.required:"success"}}];return u["default"].createElement(c.Form,{horizontal:!0,isSuccess:this.isSuccess,sibmitStatus:this.state.isSubmit},u["default"].createElement(c.FormItem,{label:"消息提醒方式:",validate:e[0],required:!0},u["default"].createElement(d.CheckboxGroup,{block:!0,selects:this.state.noticeType,onChange:this.handleSelectChange.bind(this,"noticeType")},u["default"].createElement(d.Checkbox,{value:"msg"},"短信"),u["default"].createElement(d.Checkbox,{value:"email"},"邮件"))),u["default"].createElement(c.FormItem,{label:"短信组:"},u["default"].createElement(s.Select,{selected:this.state.msg,onChange:this.handleSelectChange.bind(this,"msg")},u["default"].createElement(s.Option,{value:"no"},"请选择"),u["default"].createElement(s.Option,{value:"hive_1"},"hive_1"),u["default"].createElement(s.Option,{value:"hive_2"},"hive_2"))),u["default"].createElement(c.FormItem,{label:"邮件组:"},u["default"].createElement(s.Select,{selected:this.state.email,onChange:this.handleSelectChange.bind(this,"email")},u["default"].createElement(s.Option,{value:"no"},"请选择"),u["default"].createElement(s.Option,{value:"hive_1"},"hive_1"),u["default"].createElement(s.Option,{value:"hive_2"},"hive_2"))))}});e.exports=m},675:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}var n=a(1),i=l(n),r=a(23),u=a(126),s=l(u),d=a(240),c=l(d),o=i["default"].createClass({displayName:"RuleConfig",getInitialState:function(){return{visible:!1,title:"规则配置"}},addHandler:function(e){this.refs.modal.open()},editHandler:function(e){this.refs.modal.open()},handleCancel:function(e){this.setState({visible:!1})},render:function(){return i["default"].createElement("div",null,i["default"].createElement(c["default"],{editClick:this.editHandler}),i["default"].createElement("button",{type:"button",className:"btn btn-default",onClick:this.addHandler},"新增"),i["default"].createElement(r.Modal,{ref:"modal",onCancel:this.handleCancel},i["default"].createElement(r.ModalHeader,null,i["default"].createElement("h4",{className:"modal-title"},this.state.title)),i["default"].createElement(r.ModalBody,null,i["default"].createElement(s["default"],{data:this.state,cancel:this.handleCancel}))))}});e.exports=o},676:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}var n=a(1),i=l(n),r=a(3),u=a(70),s=a(677),d=l(s),c=u.BFDSteps.Step,o=[{title:"创建任务"},{title:"规则配置"},{title:"消息通知"}],m=i["default"].createClass({displayName:"TaskMain",getInitialState:function(){return{currentStep:0}},previous:function(){var e=this.state.currentStep-1;0===this.state.currentStep&&(e=0),this.setState({currentStep:e}),this.setModalVisible(e)},next:function(){var e=this.state.currentStep+1;3===e&&(e=0),this.setState({currentStep:e}),this.setModalVisible(e)},setModalVisible:function(e){this.refs.taskStepsRender.setState({currentStep:e+1})},render:function(){var e=this.state.currentStep;return i["default"].createElement("div",{style:{width:800}},i["default"].createElement("div",null,i["default"].createElement(u.BFDSteps,{current:e,style:{width:800}},o.map(function(e,t){return i["default"].createElement(c,{key:t,title:e.title})}))),i["default"].createElement("div",{className:"add-userconfigrole-margin"},i["default"].createElement(d["default"],{ref:"taskStepsRender"})),i["default"].createElement("div",null,i["default"].createElement(r.Row,{style:{marginTop:10}},i["default"].createElement(r.Col,{span:"16",offset:"6"},i["default"].createElement(u.BFDButton,{type:"primary",className:"common-margin-right",onClick:this.previous},"上一步"),i["default"].createElement(u.BFDButton,{type:"primary",className:"common-margin-right",onClick:this.next},"下一步"),i["default"].createElement(u.BFDButton,{type:"primary",className:"common-margin-right",onClick:this.props.cancel},"提交"),i["default"].createElement(u.BFDButton,{onClick:this.props.cancel},"取消")))))}});e.exports=m},677:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}var n=a(1),i=l(n),r=a(673),u=l(r),s=a(675),d=l(s),c=a(674),o=l(c),m=i["default"].createClass({displayName:"TaskStepsRender",getInitialState:function(){return{currentStep:1}},render:function(){var e=void 0;switch(this.state.currentStep){case 1:e=i["default"].createElement(u["default"],null);break;case 2:e=i["default"].createElement(d["default"],null);break;case 3:e=i["default"].createElement(o["default"],null)}return e}});e.exports=m},678:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function n(){confirm({title:"是否确认删除？",content:"",onOk:function(){message.success("删除成功！")},onCancel:function(){}})}var i,r=a(1),u=l(r),s=a(21),d=l(s),c=a(23),o=(a(98),a(240)),m=l(o),f=a(126),h=l(f),p=[{title:"",key:"isCheck"},{title:"任务名称",key:"taskName",render:function(e){return u["default"].createElement("a",{onClick:i.editHandler},e)}},{title:"数据库",key:"database"},{title:"任务描述",key:"taskDescribe"},{title:"规则数",key:"ruleNum",render:function(e){return u["default"].createElement("div",null,e,u["default"].createElement("a",{onClick:i.onClickTest},"点击"))}},{title:"创建时间",key:"createTime"},{title:"更新时间",key:"updateTime"},{title:"创建人",key:"creater"},{title:"报警组",key:"alarmGroup"},{title:"操作",key:"operation",render:function(e,t){return u["default"].createElement("span",null,u["default"].createElement("a",{"data-key":e.taskName,href:"javascript:void(0);",onClick:i.editHandler},"编辑"),u["default"].createElement("span",{className:"ant-divider"}),u["default"].createElement("a",{"data-key":e.taskName,href:"javascript:void(0);",onClick:i.addRuleHandler},"添加规则"),u["default"].createElement("span",{className:"ant-divider"}),u["default"].createElement("a",{"data-key":e.taskName,href:"javascript:void(0);",onClick:i.delHandler},"删除"))}}],v={totalList:[{key:"1",isCheck:!1,taskName:"稽核表",database:"test67",taskDescribe:"xiaotesting",ruleNum:"2",createTime:"2016-03-03 14:29:00",updateTime:"2016-03-03 14:29:00",creater:"xxj",alarmGroup:"xiao_test"},{key:"2",isCheck:!1,taskName:"稽核表1",database:"test67",taskDescribe:"xiaotesting",ruleNum:"2",createTime:"2016-03-03 14:29:00",updateTime:"2016-03-03 14:29:00",creater:"ff",alarmGroup:"xiao_test"},{key:"3",isCheck:!1,taskName:"稽核表2",database:"test67",taskDescribe:"xiaotesting",ruleNum:"2",createTime:"2016-03-03 14:29:00",updateTime:"2016-03-03 14:29:00",creater:"jj",alarmGroup:"xiao_test"}],currentPage:1,totalPageNum:20},E=u["default"].createClass({displayName:"TaskList",getInitialState:function(){return i=this,{}},editHandler:function(e){var t="稽核表",a=v.totalList.filter(function(e){return e.taskName===t});console.log("ffsadf="+a),this.props.editClick(a)},addRuleHandler:function(){this.refs.modal.open()},delHandler:function(){n()},onClickTest:function(e){console.log("展开");var t=e.target.attributes["data-key"].value;console.log("name=",t),this.refs.tb.expandedRowRender=this.renderExpandRow()},renderExpandRow:function(e){return u["default"].createElement("div",null,u["default"].createElement(m["default"],{ref:"aa",editClick:this.editRuleHandler}))},render:function(){return u["default"].createElement("div",null,u["default"].createElement(d["default"],{data:v,showPage:"true",column:p,howRow:10}),u["default"].createElement(c.Modal,{ref:"modal",onCancel:this.handleCancel},u["default"].createElement(c.ModalHeader,null,u["default"].createElement("h4",{className:"modal-title"},"规则配置")),u["default"].createElement(c.ModalBody,null,u["default"].createElement(h["default"],null))))}});e.exports=E}});